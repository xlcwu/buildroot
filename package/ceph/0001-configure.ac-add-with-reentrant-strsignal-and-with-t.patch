From 6b8ff0c61c68ac25ed09bca67d616b61a3c8ab57 Mon Sep 17 00:00:00 2001
From: John Coyle <dx9err@gmail.com>
Date: Sun, 6 Mar 2016 14:00:49 -0500
Subject: [PATCH] configure.ac: add --with-reentrant-strsignal and
 --with-thread-safe-res-query options for Alpine support

Signed-off-by: John Coyle <dx9err@gmail.com>
---
 configure.ac | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/configure.ac b/configure.ac
index b6453b1..b83cdf9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1305,6 +1305,20 @@ if test "x$with_openldap" != "xno"; then
 fi
 AM_CONDITIONAL(WITH_OPENLDAP, [ test "$have_openldap" = "yes" ])
 
+AC_ARG_WITH([reentrant-strsignal],
+            [AS_HELP_STRING([--with-reentrant-strsignal], [Use strsignal(3) instead of sys_siglist[]])],
+            [],
+            [with_reentrant_strsignal=no])
+AS_IF([test "x$with_reentrant_strsignal" != xno],
+  [AC_DEFINE(HAVE_REENTRANT_STRSIGNAL, 1, [Define if strsignal(3) is reentrant])])
+
+AC_ARG_WITH([thread-safe-res-query],
+            [AS_HELP_STRING([--with-thread-safe-res-query], [Use res_query(3) without locking])],
+            [],
+            [with_thread_safe_res_query=no])
+AS_IF([test "x$with_thread_safe_res_query" != xno],
+  [AC_DEFINE(HAVE_THREAD_SAFE_RES_QUERY, 1, [Define if res_query(3) is thread safe])])
+
 # Checks for typedefs, structures, and compiler characteristics.
 #AC_HEADER_STDBOOL
 #AC_C_CONST
-- 
1.9.1

